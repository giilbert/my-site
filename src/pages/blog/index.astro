---
import PrimaryLayout from "@/layouts/primary-layout.astro";
import { getCollection } from "astro:content";

const blog = await getCollection("blog");
---

<PrimaryLayout>
  <h2 class="text-2xl font-medium">Blog</h2>

  <div class="mt-2 flex flex-col gap-2">
    {
      blog.map((post) => (
        <a href={`/blog/${post.slug}`} class="block">
          <div class="p-4 -mx-4 hover:bg-muted mb-1 rounded-md duration-500 flex">
            <div>
              <h3 class="text-lg font-medium">{post.data.title}</h3>
              <p class="text-muted-foreground">{post.data.description}</p>
            </div>
            <div class="ml-auto">
              <p class="text-muted-foreground">
                {Intl.DateTimeFormat("en-us").format(post.data.pubDate)}
              </p>
            </div>
          </div>
        </a>
      ))
    }
  </div>
</PrimaryLayout>
